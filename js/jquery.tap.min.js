(function(e,t){var n=0,r=0;e.fn.tap=function(t,i,s){return typeof t=="function"&&(i=t,t=15),"ontouchstart"in window?this.each(function(){var s=0,o=null,u=++n,a=null,f=!1,l=this,c=e(this);c.bind("touchstart",function(e){if(r!=0)return;r=u,f=!0,s=0,e.originalEvent.touches&&e.originalEvent.touches[0]&&(o=e.originalEvent.touches[0],a={x:o.screenX,y:o.screenY})}),c.bind("touchend",function(e){r==u&&(r=0);if(!f)return;f=!1,s<t?i.apply(l,[].slice.call(arguments)):c.trigger("tap-failed")}),c.bind("touchmove",function(e){if(!f)return;if(e.originalEvent.touches.length==0||a===null)return f=!1;o=e.originalEvent.touches[0],s=Math.sqrt(Math.pow(o.screenX-a.x,2)+Math.pow(o.screenY-a.y,2)),s>t&&(c.trigger("exceed-tap-threshold"),f=!1)}),c.bind("touchcancel",function(){r==u&&(r=0),f=!1,c.trigger("tap-failed")})}):s||this.click(i),this}})(window.jQuery||window.$);